<%- include('header'); %>
<%- include('sidebar'); %>

        <div id="content-wrapper">

            <div class="container-fluid">

                <div class="card mb-3">
                    <div class="card-header">
                        <i class="fas fa-table"></i> Liste des commandes</div>
                    <div class="card-body">
                        <div class="table-responsive">

                            <span class="status-success"><i class="fas fa-circle"></i> : validated</span>
                            <span class="status-pending"><i class="fas fa-circle"></i> : pending</span>
                            <span class="status-danger"><i class="fas fa-circle"></i> : refused</span>
                            
                            <table id="product-list" class="table table-bordered" width="100%" cellspacing="0">
                                <thead>
                                    <tr>
                                        <th>Date Commande</th>
                                        <th>Total</th>
                                        <th>Frais de port</th>
                                        <th>Payée</th>
                                        <th>Date Paiement</th>
                                        <th>Expédiée</th>
                                        <th>Date Exp</th>
                                        <th>Adresse</th>
                                        <th>Ville</th>
                                        <th>Code postal</th>
                                        <th>Détail</th>
                                    </tr>
                                </thead>
                                <tfoot>
                                    <tr>
                                        <th>Date Commande</th>
                                        <th>Total</th>
                                        <th>Frais de port</th>
                                        <th>Payée</th>
                                        <th>Date Paiement</th>
                                        <th>Expédiée</th>
                                        <th>Date Exp</th>
                                        <th>Adresse</th>
                                        <th>Ville</th>
                                        <th>Code postal</th>
                                        <th>Détail</th>
                                    </tr>
                                </tfoot>
                                <tbody>
                                    <% for(var i=0;i<orders.length;i++) { console.log(orders[i]) %>

                                        <tr>
                                            <td>
                                                <%= dateForm(orders[i].date_insert) %>
                                            </td>
                                            <td>
                                                <%= orders[i].total %>€
                                            </td>
                                            <td>
                                                <%= orders[i].shipping_cost %>€
                                            </td>

                                            <!--status-->
                                            <td class=
                                            <%switch(orders[i].status_payment) {
                                            case 'waiting':%> <%='status-pending'%><% break;
                                            case 'refused':%> <%= 'status-danger'%><% break;
                                            case 'validated':%> <%= 'status-success'%><% break;
                                            default:%> <%= 'status-secondary'%> <%}%>><i class="fas fa-circle"></i>
                                            </td>
                                            <!--status-->
                                            
                                            <td>
                                                <%switch(orders[i].date_payment) {
                                                case null:%> <%= '-' %><% break;
                                                default:%> <%= dateForm(orders[i].date_payment) %> <%}%>
                                            </td>

                                            <!--status shipment-->
                                            <td class=
                                            <%switch(orders[i].status_shipment) {
                                            case true:%> <%= 'status-success'%><% break;
                                            default:%> <%= 'status-secondary'%> <%}%>><i class="fas fa-circle"></i>
                                            </td>
                                            <!--status shipment-->

                                            <td>
                                                <%switch(orders[i].date_shipment) {
                                                case null:%> <%= '-' %><% break;
                                                default:%> <%= dateForm(orders[i].date_shipment) %> <%}%>
                                            </td>

                                            <td>
                                                <%= orders[i].delivery_address %>
                                            </td>
                                            <td>
                                                <%= orders[i].delivery_city %>
                                            </td>
                                            <td>
                                                <%= orders[i].delivery_zipcode %>
                                            </td>
                                            <td><a href="/order-page?id=<%=orders[i]._id%>">voir</a></td>
                                        </tr>

                                        <%}%>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>


            </div>
            <!-- /.container-fluid -->

            <!-- Sticky Footer -->
            <footer class="sticky-footer">
                <div class="container my-auto">
                    <div class="copyright text-center my-auto">
                        <span>Copyright © Blackboard</span>
                    </div>
                </div>
            </footer>

        </div>
        <!-- /.content-wrapper -->

    </div>
    <!-- /#wrapper -->
    <%- include('footer'); %>